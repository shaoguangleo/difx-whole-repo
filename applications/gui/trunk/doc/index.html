<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DiFX GUI: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 36px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DiFX GUI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Topics</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DiFX GUI Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#overview">Overview of the DiFX GUI</a><ul><li class="level2"><a href="#whatItDoes">What the GUI Does</a></li>
</ul>
</li>
<li class="level1"><a href="#installAndBuild">Build and Installation</a></li>
<li class="level1"><a href="#startup">Running the GUI and Connecting to the DiFX Host</a><ul><li class="level2"><a href="#runMk5daemon">Run mk5daemon!</a></li>
<li class="level2"><a href="#runningDiFXRemotely">Running DiFX Remotely</a></li>
</ul>
</li>
<li class="level1"><a href="#changingSettings">Changing Settings</a></li>
<li class="level1"><a href="#monitoringTheDiFXCluster">Monitoring the DiFX Cluster Hardware</a></li>
<li class="level1"><a href="#monitoringDiFXJobs">Monitoring DiFX Jobs Using the Queue Browser</a><ul><li class="level2"><a href="#addingExistingExperiments">Adding Existing Experiments to the Queue Browser</a></li>
</ul>
</li>
<li class="level1"><a href="#creatingNewExperiment">Creating a New Experiment</a><ul><li class="level2"><a href="#namingTheExperiment">Naming the New Experiment and Putting It Somewhere</a></li>
<li class="level2"><a href="#gettingVexFileContent">Getting .vex File Content</a><ul><li class="level3"><a href="#changingVexFileContent">Editing .vex File Content</a></li>
</ul>
</li>
<li class="level2"><a href="#correlationTuningParameters">Correlation Tuning Parameters</a></li>
<li class="level2"><a href="#stationsAndDataSources">Stations and Data Sources</a><ul><li class="level3"><a href="#stationsSettings">Station Settings</a></li>
</ul>
</li>
<li class="level2"><a href="#selectingScans">The Many Ways to Select Scans and Stations</a></li>
</ul>
</li>
<li class="level1"><a href="#runningDifxJobs">Running DiFX Jobs</a><ul><li class="level2"><a href="#runningAnIndvidualJob">Running an Individual Job</a><ul><li class="level3"><a href="#pickingDataSourcesAndProcessors">Picking Data Sources and Processors</a></li>
</ul>
</li>
<li class="level2"><a href="#runningWithTheScheduler">Running Jobs With the Scheduler</a></li>
<li class="level2"><a href="#usingTheRealTimeMonitor">Using the Real-Time Monitor</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview of the DiFX GUI</h1>
<p>The DiFX GUI was developed at the United States Naval Observatory as a front end to the DiFX software correlator. It was designed to minimize the effort required to conduct "normal" correlation tasks without crippling the flexibility sophisticated operators require for unique or unusual operations. While it was designed to make running the correlator easier, running the GUI (and reading this documentation) requires some understanding of DiFX and its components.</p>
<p>This document contains an end-to-end description of how the DiFX user interface can be used to run DiFX jobs. All steps in the process are described in roughly the sequence they would be employed in actually running a job. Because the GUI has many options that can cause branching paths in step-by-step instructions, what follows is only a description of a "sample" procedure for running a job. The specific needs of individual users, data and installations will likely require approaches that differ some, or possibly a lot. With this in mind, links are provided to other sections of the documentation that may provide additional details on each subject.</p>
<p>This document is <em>not</em> a comprehensive tutorial on all of the functionality of DiFX itself. A good place to start looking for that sort of thing is <a href="http://cira.ivec.org/docuwiki/doku.php/difx/start">here</a>.</p>
<h2><a class="anchor" id="whatItDoes"></a>
What the GUI Does</h2>
<p>The GUI allows an operator to perform basic tasks associated with DiFX correlation. It was created for the purpose of processing data from regular, fairly standardized geodetic experiments, and is probably best suited for that kind of work. Specifically, it allows a user starting with radio interferometry data and a ".vex" file to:</p>
<ol>
<li>
Create a ".v2d" file governing how the .vex file and data will be used to produce DiFX experiments and organize where results data from DiFX processing will be stored. </li>
<li>
Run <em>vex2difx</em> and <em>calcif2</em> (or variants) to produce the control files DiFX requires to run experiments (.input, .calc, etc.). </li>
<li>
Determine how DiFX processing will be distributed amongst correlator resources (by creating .machines and .threads files). </li>
<li>
Run (possibly large numbers of) DiFX jobs according to user-defined scheduling instructions. </li>
</ol>
<p>The GUI also serves some ancillary purposes, including:</p>
<ol>
<li>
Monitoring the health and activity of DiFX cluster components (processors, Mark5 units, etc) and shows the progress of DiFX jobs running on the cluster. In this capacity it is essentially a passive observer, serving as a somewhat more colorful replacement to the <em>errormon</em>, <em>mk5mon</em> and <em>cpumon</em> scripts that come with DiFX. </li>
<li>
Running some controls on data and data modules, including copying data to disk, creating "file lists", and scanning module hard drives for problems. </li>
</ol>
<h1><a class="anchor" id="installAndBuild"></a>
Build and Installation</h1>
<p>The DiFX GUI and its associated server process <em>guiServer</em> are part of the DiFX software tree. The GUI is written in Java, and is currently located in the sub-directory:</p>
<pre>   applications/gui</pre><p>The Java archive (".jar") file used to run the GUI itself is in:</p>
<pre>   applications/gui/gui/dist/gui.jar</pre><p>This directory also contains a number of other ".jar" files that are necessary to run the GUI. If you want to move the GUI to another disk location it is best to simply copy the complete contents of the "dist" directory.</p>
<p>The top-level of this documentation is here:</p>
<pre>   applications/gui/doc/intro.html</pre><p>The <em>guiServer</em> C++ application is also part of the DiFX software tree, in:</p>
<pre>   application/guiServer</pre><p>Using DiFX build procedures (such as <a href="https://safe.nrao.edu/wiki/bin/view/HPC/UsnoDifxInstallation"><em>difxbuild</em></a>) will compile <em>guiServer</em> and install it and gui.jar file in the appropriate bin directories. The ".jar" files do not need compilation.</p>
<h1><a class="anchor" id="startup"></a>
Running the GUI and Connecting to the DiFX Host</h1>
<p>A single instance of the server application <em>guiServer</em> needs to be run on one of the processing nodes in the DiFX cluster (the processor running <em>guiServer</em> is often referred to in the documentation as the "DiFX Host" or the "DiFX head node"). <em>GuiServer</em> must be run by a user (not root for security reasons) that has read/write permissions over all data directories used by DiFX. This user must also be able to start processes on all other nodes using <em>mpirun.</em> It probably makes most sense to have the user that you normally use to run DiFX from the command line run <em>guiServer</em>.</p>
<p><a class="anchor" id="startingGuiServer"></a><em>GuiServer</em> is run from the command line on the DiFX Host:</p>
<pre>   guiServer [PORT #]</pre><p>The optional port number is the TCP connection port used to communicate with the GUI. If it is not specified, <em>guiServer</em> will use a default port number (it uses the value given by the DIFX_MESSAGE_PORT environment variable, or 50200 if that is not available). As soon as it is started, <em>guiServer</em> will produce a message indicating the port it is using:</p>
<pre>   server at port 50200</pre><p>The GUI itself is a Java program that can be run anywhere that a network connection to the DiFX cluster is available. Because the GUI and <em>guiServer</em> communicate using insecure TCP connections there must be no intervening firewalls between them (there are ways to deal with firewalls and in fact run the GUI anywhere - see <a class="el" href="index.html#runningDiFXRemotely">Running DiFX Remotely.</a> Run the GUI using its ".jar" (Java archive) file:</p>
<pre>   java -jar [GUI DIST PATH]/gui.jar</pre><p>The "GUI DIST PATH" is the location of the "dist" subdirectory in the gui portion of the DiFX installation tree. Once the GUI is running, the address of the DiFX Host (where <em>guiServer</em> is running) and the port number (what <em>guiServer</em> told you above) can be entered in the Settings menu to connect the two (see DiFX Control Connection in the Settings documentation for details). A proper connection will be pretty obvious - the <a class="el" href="topLevelWindow.html#guiServerConnectionMonitor">GuiServer Connection Monitor</a> will turn green, a "connection successful" message will appear, and, assuming you have <a class="el" href="index.html#runMk5daemon">mk5daemon</a> operating properly, the GUI should start displaying information about the components of the DiFX cluster.</p>
<div class="image">
<img src="connectedTopLevel.png" alt="connectedTopLevel.png"/>
</div>
<p>The GUI and <em>guiServer</em> can be started in any order - the GUI will connect as soon as a <em>guiServer</em> becomes available (for the most part - remote connections are sometimes more touchy about this). Any number of GUI sessions can be run simultaneously using the same <em>guiServer</em>, although there are considerations one should take into account to make sure ports are always available.</p>
<h2><a class="anchor" id="runMk5daemon"></a>
Run mk5daemon!</h2>
<p>For the GUI to work properly it is important that the <em>mk5daemon</em> process be running on every DiFX hardware component (processors, MK5 units, etc.) in the DiFX cluster. The reason for this is that <em>mk5daemon</em> produces the periodic "heartbeats" for each component, including such information as CPU and memory load and read/write operations. <em>Mk5daemon</em> is also important because it is the only way the GUI knows that a component exists and is available as a resource - without it the component will not be utilized in DiFX processing. Your DiFX cluster may be set up such that <em>mk5daemon</em> is started by each component when it boots, but in the event it is not you will need to log into each component (use the DIFX_USER) and start it by typing:</p>
<pre>   mk5daemon &amp;</pre><p>Soon after <em>mk5daemon</em> is run on a component, the component should appear in the GUI Hardware Monitor (see <a class="el" href="index.html#monitoringTheDiFXCluster">Monitoring the DiFX Cluster Hardware</a>).</p>
<h2><a class="anchor" id="runningDiFXRemotely"></a>
Running DiFX Remotely</h2>
<p>The GUI/guiServer communications link, which handles all interaction between the GUI and DiFX, is based on insecure TCP socket connections. This works fine if you run the GUI on the same unrestricted LAN as the software correlator, but breaks down if you move outside firewalls that restrict direct TCP connections. To get around such restrictions, an "ssh tunnel" can be set up through a firewall as long as you can ssh to the firewall. Running a DiFX cluster that is located behind a firewall using a GUI running on a machine outside the firewall can be accomplished using the following steps (the order of which is unimportant):</p>
<ol>
<li>
<b>Start <em>guiServer</em></b> - normally on the head node of the DiFX cluster. The TCP connection port will be referred to as the "connection port" in the following steps. </li>
<li>
<b>Start an ssh tunnel</b> from the location where you wish to run the GUI through the firewall. This is done using an ssh command with some options: <pre>
ssh -N -L [LOCALPORT]:[WHAT FIREWALL CALLS DIFX HEADNODE]:[CONNECTION PORT] USER@FIREWALL
</pre> <ul>
<li>
<b>USER@FIREWALL</b> is how you would log into the firewall from your local machine. </li>
<li>
<b>CONNECTION PORT</b> is the TCP connection port used by <em>guiServer</em> on the head node of the DiFX cluster. </li>
<li>
<b>WHAT FIREWALL CALLS DIFX HEADNODE</b> is the node name of the head node as the firewall sees it (what you would use if logging into the head node from the firewall). </li>
<li>
<b>LOCALPORT</b> is a port on the machine where the GUI is being run. </li>
</ul>
<br/>
 </li>
<li>
<b>Start the GUI</b> on the machine outside the firewall. In the "DiFX Control Connection" section of the "Settings" window, set "DiFX Host" to "localhost" and "Control Port" to the value of LOCALPORT you used in the ssh tunnel. The "guiServer Connection" light should turn green and you should start seeing data from the nodes in the DiFX cluser. </li>
<li>
<p class="startli">Make sure <a class="el" href="settingsSection.html#channelAllData">Channel All Data</a> is activated in the DiFX ControlConnection" section of the "Settings" window.</p>
<p class="endli"></p>
</li>
</ol>
<h1><a class="anchor" id="changingSettings"></a>
Changing Settings</h1>
<p>The GUI has many options the user can set to govern processing, how data are stored, and where necessary components are located. These are all collected in the "Settings Window" which can be accessed from the "Settings/Show Settings" menu item. There are a large number of options in the Settings Window, but most of these needn't be touched on a job-by-job basis as long as the GUI is running smoothly and appears to be doing things correctly. Below is a short list of some of the settings that are more likely to require user changes, along with brief explanations of what they do (each item is linked to detailed documentation). A comprehensive list of all settings and their options is contained in the <a class="el" href="settingsSection.html">Settings Window in Detail</a> documentation.</p>
<ul>
<li>
<a class="el" href="settingsSection.html#difxHost">DiFX Host</a> is the host name of the "head node" of the DiFX cluster - where <em>guiServer</em> should be running. The DiFX host name should be whatever the machine on which the GUI is run calls the DiFX head node - i.e. a "ping" of this host name from the GUI host should be successful. </li>
<li>
Control Port is the port number at which the GUI will repeatedly attempt to make a connection to <em>guiServer</em> if such a connection does not exist. The control port should match the <a class="el" href="index.html#startingGuiServer">port number</a> given by <em>guiServer</em> when it is started. </li>
<li>
<a class="el" href="settingsSection.html#runWithDifxVersion">Run w/DiFX Version</a> is the version of DiFX software that will be run by the GUI. This version does not need to match that of the GUI or <em>guiServer</em>, however it does need to be installed on the DiFX cluster. </li>
<li>
<a class="el" href="settingsSection.html#difxExecuteScript">DiFX Execute Script</a> is a script on the DiFX processing nodes that is used to execute all DiFX and mpi commands. The script defines environment variables and performs any other necessary setup before running things. Most of the time the script selected automatically by the GUI should be fine. </li>
<li>
<a class="el" href="settingsSection.html#workingDirectory">Working Directory</a> is the path under which new directories are stored for DiFX experiments that the user creates using the GUI. The "user" running <em>guiServer</em> needs to have write permission in this location or none of this will work. </li>
</ul>
<p>Settings are preserved between GUI sessions, so once you have things set up and running properly you should be able to restart the GUI and have it run properly right away. You can also save specific setting configurations to files that can later be loaded. See <a class="el" href="settingsSection.html#settingsFile">Settings File</a>.</p>
<h1><a class="anchor" id="monitoringTheDiFXCluster"></a>
Monitoring the DiFX Cluster Hardware</h1>
<p>The GUI Hardware Monitor provides detail about the status of the hardware components (processors and data module drives) that comprise the DiFX cluster. Components are detected using their <a class="el" href="index.html#runMk5daemon">mk5daemon</a> broadcasts, so only those components running that application will be visible. Data are continually updated at the broadcast rate of <em>mk5daemon</em> - "lights" associated with each component will flash green with every update, providing a "heartbeat" for each component. These lights will turn yellow, and then red if a component goes silent for too long.</p>
<div class="image">
<img src="hardwareMonitor.png" alt="hardwareMonitor.png"/>
</div>
<p>Quite a bit of information is available for each component - a pull-down menu accessible through the arrow in the header for each component type provides a list from which you can turn data outputs on and off. The available items reflect the data fields provided by <em>mk5daemon</em>, and not all of them are currently filled.</p>
<div class="image">
<img src="hardwareMonitorWithMenu.png" alt="hardwareMonitorWithMenu.png"/>
</div>
<p>The menu also allows some "hardware" control - components can be reset, shut down, and rebooted. Controls that perform the same operations on individual components are available using the arrows associated with each.</p>
<div class="image">
<img src="hardwareMonitorWithMenu2.png" alt="hardwareMonitorWithMenu2.png"/>
</div>
<p>These hardware controls should be used with caution!</p>
<h1><a class="anchor" id="monitoringDiFXJobs"></a>
Monitoring DiFX Jobs Using the Queue Browser</h1>
<p>The Queue Browser organizes DiFX jobs under a three-level hierarchy with "Experiments" at the top level, underneath which are "Passes" that in turn contain individual "Jobs". </p>
<ul>
<li>
An <b>Experiment</b> is usually bound to a single data set (one or more scans) collected over a specific time span - the results of a single observing session for instance. It can contain any number of "Passes" (including zero). </li>
<li>
A <b>Pass</b> is used to contain a single analysis of a subset of the data within an Experiment. Often Experiments contain a "Clock Pass" run on a few scans to generate the time delays for each involved antenna, and a "Production Pass" run on all scans with those time delays in place. </li>
<li>
Within each Pass is a series of <b>Jobs</b>, each controlling the processing of at least one scan.  </li>
</ul>
<div align="center"><div class="image">
<img src="images/how_to_run_things/queueBrowser1.png"  height="299" width="800"/>
</div>
</div><h2><a class="anchor" id="addingExistingExperiments"></a>
Adding Existing Experiments to the Queue Browser</h2>
<h1><a class="anchor" id="creatingNewExperiment"></a>
Creating a New Experiment</h1>
<p>To create a new experiment for DiFX processing, all that is required is a .vex file and appropriate data. The GUI can be used to perform (or facilitate) the various steps required to set up an experiment based on instructions from the user. In short, these steps amount to:</p>
<ol>
<li>
Setting up a location to do the processing </li>
<li>
Creating a .v2d file to go with the .vex file </li>
<li>
Running <em>vex2difx</em> and <em>calcif2</em> to create .input and .im files </li>
</ol>
<p>The GUI tries to be as flexible as possible about this, although it has a "preferred" way of arranging things such that running DiFX processing on the created experiments is possible through the GUI as well.</p>
<p>To create a new experiment, select the "Experiment/Create New..." menu item in the Queue Browser. <b>IMAGE<br/>
 </b>This will bring up the "Create New Experiment" window:<br/>
 <b>IMAGE</b><br/>
 The purpose of this window is to allow the user to tailor a new experiment to meet their needs. It creates a "working" directory for the new experiment, allows the specification of data sources, and puts all relevant DiFX files (.v2d, .input, etc.) in the working directory from which they can be run (either through the GUI or by hand). Experimentation with different GUI settings while creating an experiment is not dangerous as the original <code>.vex</code> file and data files are not moved or altered in any way.&#160; If you mess up, delete the experiment and try again.<br/>
</p>
<h2><a class="anchor" id="namingTheExperiment"></a>
Naming the New Experiment and Putting It Somewhere</h2>
<h2><a class="anchor" id="gettingVexFileContent"></a>
Getting .vex File Content</h2>
<p>For a DiFX Experiment to be created and run, it must begin with a .vex file. Vex files should be provided with observed data and imported into the GUI where they are parsed to determine the structure of jobs that will be created, data sources that are necessary, and other things.</p>
<h3><a class="anchor" id="changingVexFileContent"></a>
Editing .vex File Content</h3>
<p>Once you have obtained .vex data from some source, the data are displayed in the ".vex File Editor" panel. This panel provides a (rather rudimentary) text editor that can be used to edit the .vex data by hand. The final edited text is used in the .vex file assigned to your created experiment, a copy of which is put in your working directory.</p>
<p>For any changes to apply, you must click the "Parse Content" button.</p>
<p>Some care should be taken in directly editing .vex data as it is trivial to corrupt the .vex to the point where it can't be used (the DiFX operational paradigm says that users should never need to do this), but editing this content does not alter the original source .vex file, only the final .vex file associated with the experiment - so playing around with things is not permanently harmful.<br/>
</p>
<h2><a class="anchor" id="correlationTuningParameters"></a>
Correlation Tuning Parameters</h2>
<p>The Correlation Tuning Parameters section includes values that can be changed to adjust the quality of the correlation results, and/or the total time processing takes. Adjustments to many of these values is something of an art in itself, and the details of what things do and what their "best" values should be is not covered here (some talks at DiFX Users Meetings have covered the subject - slides can be viewed here).</p>
<p>Each item has an associated "apply" check box. If this box is not checked, no instructions regarding the item will be put in the .v2d file and <em>vex2difx</em> will be allowed to pick its own defaults. Unless you know what you are doing, don't check the apply box - let <em>vex2difx</em> pick the values! The GUI has default values for all items but they are not based on anything - they are essentially placeholders. The default values that are picked by <em>vex2difx</em> are far better.</p>
<h2><a class="anchor" id="stationsAndDataSources"></a>
Stations and Data Sources</h2>
<p>Each antenna involved in the observations described by the .vex data triggers the creation of a panel in the "Stations" section with the two-letter code station/antenna code used as a panel title. Each station panel contains a number of sub-sections: at least one Data Stream; Antenna; Site; and Settings.</p>
<div class="image">
<img src="stationsSection.png" alt="stationsSection.png"/>
</div>
<p>In most cases users will only be concerned with changing the Data Stream settings. This section tells DiFX where the data for a particular station/antenna can be found.</p>
<p>Because filling out the Data Source section can be tedious, the DiFX GUI provides ways of pre-defining all Data Source settings for a station/antenna based on known and/or likely locations. See <a class="el" href="settingsSection.html#antennaDefaults">Antenna Defaults</a> in the Settings Window "Job Creation Settings" section.</p>
<h3><a class="anchor" id="stationsSettings"></a>
Station Settings</h3>
<p>The Settings section contains settings for Tone, Phase Calibration Interval and Delta Clock.&#160; The Delta Clock value is often gleaned by running a "Clock Pass" on a subset of the experiment's data (see some sort of explanation here).<br/>
 </p>
<h2><a class="anchor" id="selectingScans"></a>
The Many Ways to Select Scans and Stations</h2>
<p>When new .vex data are selected, the GUI begins with the assumption that all observations described in the data will be included in the new experiment. There are a number of ways of adjusting which of the scans that make up the observations are ultimately used, and which stations are used in which scans, most of which are part of the <a class="el" href="experimentEditor.html">Experiment Editor</a>. Scan and station selection changes must be reflected in the <code>.v2d</code> and <code>.vex</code> files that are created as part of the new experiment, so selections are part of the experiment creation process. The <a class="el" href="experimentEditor.html#experimentScanSelection">Scan Selection</a> section of the Experiment Editor can be used at any time to view the scans that will be included in the experiment when it is created as well as which stations are used for each.</p>
<div class="image">
<img src="experimentEditor_scanSelection.png" alt="experimentEditor_scanSelection.png"/>
</div>
<p>Some of the scan and station selection controls can work at cross-purposes - effectively they provide more than one way to cause a scan or a station to be used. When a conflict occurs, the GUI will give the most recent command precedence (if, for instance, a command is given that a scan be included in the final experiment when a previous command eliminated the scan, the GUI will include the scan).</p>
<h6>Eliminating Stations in the "Source" <code>.vex</code> Data</h6>
<p>Stations can be eliminated from individual scans by putting a "-1" in the "code" column within the appropriate "scan" section in the "source" <code>.vex</code> data. When the GUI encounters the "-1", it will remove the station from the scan. This duplicates hardware correlator behavior. Starting with the <code>.vex</code> file snippet below, the final <code>.vex</code> file will not include the station "Bd" because of the "-1" in the final column.</p>
<div class="fragment"><div class="line">scan 128-1703;</div>
<div class="line">    start = 2014y128d17h03m34s;</div>
<div class="line">    mode = GEOSX8N.8F;</div>
<div class="line">    source = 1846+322;</div>
<div class="line">    station = Bd :    0 sec :     20 sec :     0 ft : 1A : &amp;amp;n : -1; </div>
<div class="line">    station = Ho :    0 sec :     20 sec :     0 ft : 1A : &amp;amp;n : 1;</div>
<div class="line">    station = Kk :    0 sec :     20 sec :     0 ft : 1A : &amp;amp;cw : 1;</div>
<div class="line">    station = Ny :    0 sec :     20 sec :     0 ft : 1A : &amp;amp;ccw : 1;</div>
<div class="line">    station = Ts :    0 sec :     20 sec :     0 ft : 1A : &amp;amp;cw : 1;</div>
<div class="line">endscan;</div>
</div><!-- fragment --><p>For changes of this type to be recognized, the <code>.vex</code> file must be parsed by the <a class="el" href="experimentEditor.html">Experiment Editor</a>. You edit the <code>.vex</code> file in the <a class="el" href="experimentEditor.html#vexFileEditor">.vex File Editor</a> or you can use your favorite text editor.</p>
<p>If you do not want the GUI to pay attention to the "-1" code in this way, un-check the <a class="el" href="settingsSection.html#eliminateStations">Eliminate Stations With "-1" Code</a> box in the Settings menu.</p>
<h5><a class="anchor" id="Eliminating_Stations_in_the_Stations"></a>&#160;&#160;&#160; Eliminating Stations in the "Stations" Section<br/>
 </h5>
<p>The "Stations" section is primarily set up to change parameters related to each antenna involved in an experiment, and to select the data sources associated with them (see above).&#160; However it also includes a check box that can be used to completely remove each station from the experiment. Any scans that no longer have enough stations to form a baseline (i.e. less than two) will be eliminated.&#160; <br/>
 <b>IMAGE</b><br/>
 </p>
<h5>&#160;&#160;&#160; The "Scan/Station Timeline" Editor</h5>
<p>The "Scan/Station Timeline" section provides a visual map of all scans and the stations used in them in a timeline.&#160; It allows the selection/deselection of individual stations within scans or the inclusion of data from different stations based on time.<br/>
 <b>IMAGE<br/>
 </b>Somewhat more complex explanation here.<br/>
 </p>
<h5>&#160;&#160;&#160; Selecting by Source Using the "Sources" Editor<br/>
 </h5>
<p>The "Sources" section shows all sources and the stations used to observe them.&#160; It allows sources to be selected and deselected, and stations to be selectively used or eliminated from sources.<br/>
 <b>IMAGE<br/>
 </b></p>
<ul>
<li>
All sources included in the .vex file are listed.&#160; Boxes show which sources are observed with which stations. </li>
<li>
Hover over the name of a source to produce a tooltip that includes information about the source as well as the names of the scans used to observe it and the stations used for each of those scans (stations marked in red have been eliminated). </li>
<li>
Hover over the boxes to produce a tooltip that includes which scans use the associated station on the associated source.&#160; A scan that appears in red text has been eliminated - either explicitly or because it lacks sufficient stations to form a baseline.<br/>
  </li>
<li>
Use check boxes to add or eliminate a source.&#160; When a source is removed, all scans associated with it are eliminated from the final experiment.&#160; When a source is added, all scans associated with it are put into the final experiment (assuming they have sufficient stations to form a baseline). </li>
<li>
Click on the boxes to add or eliminate a station from the observations of a given source.&#160; Scans will be added or eliminated from the final experiment based on whether changes give them enough stations to form a baseline.<br/>
  </li>
</ul>
<p>The Sources section is something of a work in progress, and not something anyone uses at the USNO, so it is a little confused at this point as to what it wants to be.&#160; It was developed originally with the idea that astronomical observers would be interested in sources (in geodesy they are uninteresting).&#160; Suggestions are welcome.</p>
<h5>&#160;&#160;&#160; Selecting Specific Scans With the "Scan
  Selection" Editor<br/>
 </h5>
<p>At any time in the scan/station selection process, the "Scan
  Selection" editor will show which scans will be included in the final experiment (included scans are green, scans not included are gray).&#160; It allows the user to make selections on a scan-by-scan basis by clicking on individual scans, or by turning all scans on or off using the "Select All" and "Clear All" buttons.<br/>
 <b>IMAGE OF SCAN SELECTION PANEL WITH LABELS HERE<br/>
 </b>The Scan Selection Editor includes a "Time Limits" plot that shows all scans from the original .vex file as a time sequence (again, scans in green are included, those in gray are not included).&#160; The mouse wheel can be used to "zoom in" on different time limits, and the red and blue triangles can be grabbed and dragged to limit the final experiment in time.&#160; This widget is somewhat redundant with the Scan/Station Timeline Editor, but it may be useful to someone.<br/>
 </p>
<h1><a class="anchor" id="runningDifxJobs"></a>
Running DiFX Jobs</h1>
<h2><a class="anchor" id="runningAnIndvidualJob"></a>
Running an Individual Job</h2>
<h3><a class="anchor" id="pickingDataSourcesAndProcessors"></a>
Picking Data Sources and Processors</h3>
<h2><a class="anchor" id="runningWithTheScheduler"></a>
Running Jobs With the Scheduler</h2>
<h2><a class="anchor" id="usingTheRealTimeMonitor"></a>
Using the Real-Time Monitor</h2>
<p>If you wish to monitor running jobs through the GUI's real-time plotting capabilities, the DiFX application <em>monitor_server</em> needs to be running. This program provides a TCP server at which real-time data from running DiFX processes can be obtained. The absence of this process is not usually a problem - if you request the real-time plotting it should be started automatically. However if you find that real-time plotting isn't working, this could be a cause. For details, see the <a class="el" href="realtimeMonitor.html">Real Time Job Monitor Documentation</a>. Note that at this time real-time monitoring is best considered "experimental". </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu May 4 2017 15:42:31 for DiFX GUI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
