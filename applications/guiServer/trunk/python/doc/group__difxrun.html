<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>DiFX Python Interface: DiFXrun</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DiFX Python Interface
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="modules.html"><span>Example&#160;Programs</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Topics</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__difxrun.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DiFXrun</div>  </div>
</div><!--header-->
<div class="contents">
<p>Usage: <b><code>DiFXrun [options] [.input path list]</code></b></p>
<p><em>DiFXrun</em> runs a list of DiFX jobs, specified by <code>.input</code> file paths, on a DiFX cluster. It tries to distribute the jobs on the cluster in a reasonable way such that the cluster will not be overwhelmed, or it will do so based on user command-line settings (reasonable or otherwise). There are three basic "modes" of operation:</p>
<p>In its <b>default mode</b>, <em>DiFXrun</em> is a kind of primitive scheduler. It attempts to assign a number of processor nodes to each job (by default this number is 2 - it can be set with the "-p" command-line option) before running them. It will continue to do this until it runs out of jobs (in which case it is done), or until it runs out of processors. When the latter happens <em>DiFXrun</em> will wait to start any remaining jobs until sufficient allocated resources are freed as previous jobs complete.</p>
<p>In <b>sequential mode</b> (use command-line option "-s"), <em>DiFXrun</em> will run only one job at a time until all are done. All processing nodes will be used on each job unless otherwise requested.</p>
<p>If the "-a" command line option is used (for <b>all mode</b>), <em>DiFXrun</em> will simultaneously run all jobs listed using all available processors. This works okay and might be the fastest way to run a limited list of jobs but breaks down rapidly as the list gets long. Remember, if you use this option you are starting all listed jobs <em>at the same time</em>.</p>
<p>In all cases <em>DiFXrun</em> applies all available processor threads to each job being run on a processor (the number of threads comes from the number of "cores" of each machine). Machines assigned as data sources will be treated as regular processors - no accommodation is made for the load put on a machine by its being a data source (experience has shown this to be an acceptable assumption). The "head node" is also treated as a processor.</p>
<p>The list of <code>.input</code> files that will be run is specified using a regular expression, and needs to include the full path to the files. Matching <code>.input</code> files actually located on the server will be run. Because of the infinite possible matches that can occur with regular expressions (depending on how you word them), no warnings will be given about "missing" <code>.input</code> files (file names that match the regular expression but do not exist).</p>
<p>To detect processors, <em>DiFXrun</em> depends on <em>mk5daemon</em> being run on each. If <em>mk5daemon</em> is missing on a precessor, <em>DiFXrun</em> will simply never see it, and will be unable to utilize it.</p>
<h3>What If I Want To Share the Correlator?</h3>
<p><em>DiFXrun</em> assumes that it has the entire correlator to itself, so that any processor it detects it will try to use for correlating jobs. You can, however, block processors by name, and thus utilize only a portion of the correlator. To do this, use the "-e" option, and list the node names you do not wish to use using a regular expression. If two or more parties agree on named blocks of processors that are allocated to them (and more importantly which ones are NOT allocated to them), they can use this option to keep multiple sessions of <em>DiFXrun</em> from stepping on one another.</p>
<p><a class="anchor" id="DIFXRUN_ARGS"></a></p><h3>Command Line Arguments</h3>
<table  border="0" cellspacing="25">
<tr>
<td><pre><b>-a, --all</b></pre> </td><td>Run the entire list of .input files using all available processors, rather than trying to balance or distribute processing. </td></tr>
<tr>
<td><pre><b>-d, --datasource <em>NODE</em></b></pre> </td><td>Use <em>NODE</em> as a data sources. This is needed if mark5 modules are employed or if only specific processor nodes have access to data files. This option must be used once for each data source. Data sources will be blindly used in the order they are specified. </td></tr>
<tr>
<td><pre><b>-D, --difx <em>VERSION</em></b></pre> </td><td>Run using a specific DiFX version. If not specified the value of the DIFX_VERSION environment variable will be used. Failing that, "DIFX-DEVEL" will be used. </td></tr>
<tr>
<td><pre><b>-e, --eliminate <em>NODE</em></b></pre> </td><td>Eliminate node names matching the regular expression NODE" from the list of nodes that will be used for processing. </td></tr>
<tr>
<td><pre><b>-g, --generate</b></pre> </td><td>Use whatever existing .machines and .threads files exist for each job. If no such files exist, new ones will be created (this option is actually "don't generate" but that was too clumsy). </td></tr>
<tr>
<td><pre><b>-h, --help</b></pre> </td><td>Print help information and quit. </td></tr>
<tr>
<td><pre><b>-H, --hostname <em>NAME</em></b></pre> </td><td>Use <em>NAME</em> as the host of the DiFX Server program. Default is to use DIFX_CONTROL_HOST environment variable. </td></tr>
<tr>
<td><pre><b>-m, --manager <em>NODE</em></b></pre> </td><td>Make <em>NODE</em> the head node used for processing. If this is not specified <em>DiFXrun</em> will use the node where <em>guiServer</em> is located. </td></tr>
<tr>
<td><pre><b>-p, --processors <em>NUM</em></b></pre> </td><td>Use NUM processors for each job. If this option is not used <em>DiFXrun</em> will use two (an arbitrary number, admittedly). </td></tr>
<tr>
<td><pre><b>-P, --port <em>PORT</em></b></pre> </td><td>Use <em>PORT</em> as the TCP port to communicated with the DiFX Server. Default is to use DIFX_CONTROL_PORT environment variable. </td></tr>
<tr>
<td><pre><b>-s, --sequential</b></pre> </td><td>Run jobs sequentially instead of simultaneously (which is the default). All processors will be employed unless <pre>-p</pre> specifies a number. &lt;/table </td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Dec 9 2015 16:23:23 for DiFX Python Interface by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
